
> vuesip@1.1.0 test:unit /app
> vitest run tests/unit "--" "tests/unit/SipClient.e2e-mode.test.ts"


[1m[46m RUN [49m[22m [36mv4.0.8 [39m[90m/app[39m

 [32mâœ“[39m tests/unit/composables/useSipClient.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 3507[2mms[22m[39m[35m 63 MB heap used[39m
       [33m[2mâœ“[22m[39m should reconnect successfully [33m 1007[2mms[22m[39m[35m 73 MB heap used[39m
       [33m[2mâœ“[22m[39m should reconnect when not previously connected [33m 1010[2mms[22m[39m[35m 75 MB heap used[39m
       [33m[2mâœ“[22m[39m should handle reconnection failure [33m 1013[2mms[22m[39m[35m 77 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useDTMF.test.ts [2m([22m[2m51 tests[22m[2m)[22m[33m 2129[2mms[22m[39m[35m 58 MB heap used[39m
       [33m[2mâœ“[22m[39m should process queue without exceeding limit [33m 641[2mms[22m[39m[35m 55 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/AnalyticsPlugin.edgecases.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 1544[2mms[22m[39m[35m 43 MB heap used[39m
 [32mâœ“[39m tests/unit/core/DTMFManager.test.ts [2m([22m[2m40 tests[22m[2m)[22m[33m 11591[2mms[22m[39m[35m 60 MB heap used[39m
       [33m[2mâœ“[22m[39m should successfully send multiple tones [33m 623[2mms[22m[39m[35m 56 MB heap used[39m
       [33m[2mâœ“[22m[39m should validate and clamp duration within allowed range [33m 6045[2mms[22m[39m[35m 56 MB heap used[39m
       [33m[2mâœ“[22m[39m should validate and clamp interToneGap within allowed range [33m 372[2mms[22m[39m[35m 57 MB heap used[39m
       [33m[2mâœ“[22m[39m should emit tone events for each tone [33m 626[2mms[22m[39m[35m 57 MB heap used[39m
       [33m[2mâœ“[22m[39m should handle concurrent send requests by queuing [33m 393[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useMediaDevices.test.ts [2m([22m[2m68 tests[22m[2m)[22m[33m 803[2mms[22m[39m[35m 52 MB heap used[39m
       [33m[2mâœ“[22m[39m should test audio output device [33m 503[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAudioProcessing.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 709[2mms[22m[39m[35m 48 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.edgecases.test.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 585[2mms[22m[39m[35m 60 MB heap used[39m
[90mstderr[2m | tests/unit/MediaManager.test.ts[2m > [22m[2mMediaManager[2m > [22m[2mtestDevice[2m > [22m[2mshould handle audio level measurement failure gracefully
[22m[39m[vitest] The vi.fn() mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.

 [32mâœ“[39m tests/unit/MediaManager.test.ts [2m([22m[2m109 tests[22m[2m)[22m[33m 514[2mms[22m[39m[35m 66 MB heap used[39m
 [32mâœ“[39m tests/unit/core/AudioManager.test.ts [2m([22m[2m58 tests[22m[2m)[22m[33m 731[2mms[22m[39m[35m 45 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/AnalyticsPlugin.test.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 449[2mms[22m[39m[35m 59 MB heap used[39m
[90mstderr[2m | tests/unit/adapters/jssip/JsSipCallSession.test.ts[2m > [22m[2mJsSipCallSession[2m > [22m[2mread-only properties[2m > [22m[2mendTime[2m > [22m[2mshould be set when call fails
[22m[39m[JsSipCallSession] Call failed: { originator: [32m'remote'[39m, cause: [32m'Canceled'[39m, statusCode: [90mundefined[39m }

[90mstderr[2m | tests/unit/adapters/jssip/JsSipCallSession.test.ts[2m > [22m[2mJsSipCallSession[2m > [22m[2mstate transitions[2m > [22m[2mshould transition to Failed on failed event
[22m[39m[JsSipCallSession] Call failed: { originator: [32m'remote'[39m, cause: [32m'Canceled'[39m, statusCode: [90mundefined[39m }

[90mstderr[2m | tests/unit/adapters/jssip/JsSipCallSession.test.ts[2m > [22m[2mJsSipCallSession[2m > [22m[2mevent emission[2m > [22m[2mshould emit failed event with cause
[22m[39m[JsSipCallSession] Call failed: { originator: [32m'remote'[39m, cause: [32m'Canceled'[39m, statusCode: [33m487[39m }

 [32mâœ“[39m tests/unit/adapters/jssip/JsSipCallSession.test.ts [2m([22m[2m139 tests[22m[2m)[22m[33m 448[2mms[22m[39m[35m 55 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/SipClientProvider.test.ts [2m([22m[2m25 tests[22m[2m)[22m[33m 310[2mms[22m[39m[35m 48 MB heap used[39m
 [32mâœ“[39m tests/unit/test-utilities.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 277[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useConference.test.ts [2m([22m[2m86 tests[22m[2m)[22m[32m 270[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/encryption.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 238[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/components/Dialpad.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 224[2mms[22m[39m[35m 68 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/MediaProvider.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 260[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/OAuth2Provider.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 134[2mms[22m[39m[35m 66 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallSession.test.ts [2m([22m[2m79 tests[22m[2m)[22m[32m 240[2mms[22m[39m[35m 51 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/providerIndex.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 174[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiTimeConditions.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 166[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/encryption.test.ts [2m([22m[2m24 tests[22m[2m)[22m[33m 322[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiAgentLogin.test.ts [2m([22m[2m67 tests[22m[2m)[22m[32m 169[2mms[22m[39m[35m 70 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipSecondLine.test.ts [2m([22m[2m68 tests[22m[2m)[22m[32m 188[2mms[22m[39m[35m 71 MB heap used[39m
 [32mâœ“[39m tests/unit/components/ReturnTimeDisplay.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 190[2mms[22m[39m[35m 65 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipRegistration.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 141[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.presence-comprehensive.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 102[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/persistence.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 160[2mms[22m[39m[35m 65 MB heap used[39m
 [31mâ¯[39m tests/unit/SipClient.e2e-mode.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 30052[2mms[22m[39m[35m 42 MB heap used[39m
       [32mâœ“[39m should detect E2E test mode with __emitSipEvent[32m 8[2mms[22m[39m[35m 61 MB heap used[39m
       [32mâœ“[39m should detect E2E test mode with __sipEventBridge[32m 1[2mms[22m[39m[35m 61 MB heap used[39m
[31m       [31mÃ—[31m should use normal mode when E2E globals not present[39m[33m 30020[2mms[22m[39m[33m (retry x2)[39m[35m 40 MB heap used[39m
       [32mâœ“[39m should immediately transition to connected state in E2E mode[32m 3[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should emit connection events to EventBridge[32m 2[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should setup EventBridge listeners for incoming calls[32m 2[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should auto-register in E2E mode when enabled[32m 1[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should skip auto-register in E2E mode when disabled[32m 1[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should handle simulated incoming calls in E2E mode[32m 3[2mms[22m[39m[35m 42 MB heap used[39m
       [32mâœ“[39m should filter E2E incoming calls by direction[32m 2[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should log E2E detection details[32m 2[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should log successful E2E start[32m 2[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should maintain consistent state in E2E mode[32m 1[2mms[22m[39m[35m 41 MB heap used[39m
       [32mâœ“[39m should allow stop in E2E mode[32m 1[2mms[22m[39m[35m 42 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.presence.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 168[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/AmiClient.test.ts [2m([22m[2m67 tests[22m[2m)[22m[32m 186[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiBase.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 148[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/adapters/JsSipAdapter.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 167[2mms[22m[39m[35m 66 MB heap used[39m
[90mstderr[2m | tests/unit/composables/useAudioDevices.test.ts[2m > [22m[2museAudioDevices[2m > [22m[2mDevice Enumeration[2m > [22m[2mshould handle enumeration errors
[22m[39mFailed to enumerate devices: Error: Enumeration failed
    at [90m/app/[39mtests/unit/composables/useAudioDevices.test.ts:184:44
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m

[90mstderr[2m | tests/unit/composables/useAudioDevices.test.ts[2m > [22m[2museAudioDevices[2m > [22m[2mReactive State[2m > [22m[2mshould have reactive error state
[22m[39mFailed to enumerate devices: Error: Test error
    at [90m/app/[39mtests/unit/composables/useAudioDevices.test.ts:637:44
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:157:11
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:753:26
    at [90mfile:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1636:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1602:10[90m)[39m
    at runTest [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1309:12[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m
    at runSuite [90m(file:///app/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.8/node_modules/[4m@vitest/runner[24m/dist/index.js:1468:8[90m)[39m

 [32mâœ“[39m tests/unit/composables/useAudioDevices.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 163[2mms[22m[39m[35m 67 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useMessaging.test.ts [2m([22m[2m66 tests[22m[2m)[22m[32m 246[2mms[22m[39m[35m 45 MB heap used[39m
 [32mâœ“[39m tests/unit/types/index.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 100[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/ConfigProvider.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 129[2mms[22m[39m[35m 68 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useTranscription.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 125[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiRecording.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 113[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiSystem.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 131[2mms[22m[39m[35m 65 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiPaging.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 161[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 166[2mms[22m[39m[35m 47 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiAgentStats.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 132[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/storage/IndexedDBAdapter.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 97[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallControls.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 119[2mms[22m[39m[35m 66 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiFeatureCodes.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 118[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/components/CallControls.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 124[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useRecordingIndicator.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 123[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.error-recovery.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 100[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiRingGroups.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 112[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useActiveSpeaker.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 103[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiBlacklist.test.ts [2m([22m[2m56 tests[22m[2m)[22m[32m 123[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiCallback.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 128[2mms[22m[39m[35m 66 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useClickToCall.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 122[2mms[22m[39m[35m 68 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useConnectionRecovery.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 160[2mms[22m[39m[35m 46 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/usePresence.test.ts [2m([22m[2m64 tests[22m[2m)[22m[32m 136[2mms[22m[39m[35m 66 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.config-utilities.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 68[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiCDR.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 112[2mms[22m[39m[35m 67 MB heap used[39m
[90mstderr[2m | tests/unit/adapters/jssip/JsSipAdapter.test.ts[2m > [22m[2mJsSipAdapter - Call Operations[2m > [22m[2mcall() / makeCall()[2m > [22m[2mshould remove session from active calls when failed
[22m[39m[JsSipCallSession] Call failed: { originator: [32m'remote'[39m, cause: [32m'Canceled'[39m, statusCode: [90mundefined[39m }

 [32mâœ“[39m tests/unit/adapters/jssip/JsSipAdapter.test.ts [2m([22m[2m73 tests[22m[2m)[22m[32m 130[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiSpy.test.ts [2m([22m[2m49 tests[22m[2m)[22m[32m 139[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipE911.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 96[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipAutoAnswer.test.ts [2m([22m[2m62 tests[22m[2m)[22m[32m 88[2mms[22m[39m[35m 62 MB heap used[39m
[90mstderr[2m | tests/unit/plugins/AnalyticsPlugin.validation.test.ts[2m > [22m[2mAnalyticsPlugin - Validation[2m > [22m[2mLarge Event Payload Size Limits[2m > [22m[2mshould handle serialization failures
[22m[39m19:39:48.602 WARN [AnalyticsPlugin] Event payload too large for type "test:event", skipping

 [32mâœ“[39m tests/unit/plugins/AnalyticsPlugin.validation.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 109[2mms[22m[39m[35m 67 MB heap used[39m
 [32mâœ“[39m tests/unit/adapters/AdapterFactory.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 56[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiIVR.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 99[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipWebRTCStats.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 96[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiOriginate.test.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 93[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallSummary.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 90[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/EventEmitter.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 77[2mms[22m[39m[35m 67 MB heap used[39m
 [32mâœ“[39m tests/unit/core/MultiLineManager.test.ts [2m([22m[2m78 tests[22m[2m)[22m[32m 95[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiCalls.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 59[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallTransfer.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 77[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiVoicemail.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 68[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAgentQueue.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 89[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSentiment.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 89[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useBandwidthAdaptation.test.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 73[2mms[22m[39m[35m 57 MB heap used[39m
[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould return all expected methods and properties
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with hasSavedSession as false
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with isLoading as false
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with error as null
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with savedSessionInfo as empty
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mInitialization[2m > [22m[2mshould accept custom options
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2msaveSession[2m > [22m[2mshould save session state to IndexedDB
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2msaveSession[2m > [22m[2mshould preserve timestamp when saving
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2msaveSession[2m > [22m[2mshould update savedSessionInfo after saving
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2msaveSession[2m > [22m[2mshould set isLoading to true during save operation
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mloadSession[2m > [22m[2mshould return saved session state
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mloadSession[2m > [22m[2mshould return null if no session is saved
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mloadSession[2m > [22m[2mshould set isLoading to true during load operation
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mloadSession[2m > [22m[2mshould call onRestoreSuccess callback when session is loaded
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mloadSession[2m > [22m[2mshould not call onRestoreError callback when no session exists
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mclearSession[2m > [22m[2mshould clear saved session
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mclearSession[2m > [22m[2mshould clear savedSessionInfo after clearing
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mclearSession[2m > [22m[2mshould set isLoading to true during clear operation
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mclearSession[2m > [22m[2mshould not throw when clearing non-existent session
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mSession Expiry[2m > [22m[2mshould return null for expired sessions
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mSession Expiry[2m > [22m[2mshould return session if not expired
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mSession Expiry[2m > [22m[2mshould use default maxAge of 5 minutes
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mSession Expiry[2m > [22m[2mshould clear expired session on load attempt
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mError Handling[2m > [22m[2mshould handle IndexedDB not available gracefully
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mError Handling[2m > [22m[2mshould set error when database open fails
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mError Handling[2m > [22m[2mshould clear error on successful operation
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mError Handling[2m > [22m[2mshould clear error on successful operation
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle sequential save calls
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle save then load sequence
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle session with all required fields
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useSessionPersistence.test.ts[2m > [22m[2museSessionPersistence[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle session with empty remoteUri
[22m[39m[Vue warn]: onBeforeUnmount is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

 [32mâœ“[39m tests/unit/composables/useSessionPersistence.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 98[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiParking.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 77[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/dialogInfoParser.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 87[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiMWI.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 93[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/usePictureInPicture.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 85[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiQueues.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 73[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 61[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/CallSession.test.ts [2m([22m[2m53 tests[22m[2m)[22m[32m 83[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSmartRouting.test.ts [2m([22m[2m68 tests[22m[2m)[22m[32m 81[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiDatabase.test.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 64[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/services/AmiService.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 76[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiPjsip.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 67[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useLocalRecording.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 68[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/core/FreePBXPresenceBridge.test.ts [2m([22m[2m52 tests[22m[2m)[22m[32m 81[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipMock.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 72[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/HookManager.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 51[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useGalleryLayout.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 85[2mms[22m[39m[35m 65 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useConnectionRecovery.network.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 64[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiSupervisor.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 72[2mms[22m[39m[35m 55 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSipDtmf.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 63[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmi.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 64[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/EventBus.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 74[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.calls.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 62[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/services/OAuth2Service.test.ts [2m([22m[2m47 tests[22m[2m)[22m[32m 51[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/useProviderSelector.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 46[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallHistory.test.ts [2m([22m[2m57 tests[22m[2m)[22m[32m 57[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useNetworkQualityIndicator.test.ts [2m([22m[2m59 tests[22m[2m)[22m[32m 75[2mms[22m[39m[35m 56 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallSession.pip.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 51[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useDialog.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 54[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallQualityScore.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 49[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiPeers.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 45[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/settingsStore.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 35[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/deviceStore.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 31[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAudioDevices.simplified.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 26[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useVideoInset.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 41[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/storage/SessionStorageAdapter.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 60[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/storage/LocalStorageAdapter.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 41[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/registrationStore.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 40[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/TransportManager.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 38[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/PluginManager.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 34[2mms[22m[39m[35m 64 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/storageQuota.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 34[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useParticipantControls.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 30[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/logger.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 27[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSettings.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 20[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/validators.test.ts [2m([22m[2m69 tests[22m[2m)[22m[32m 34[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/core/CallSession.transfer.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 42[2mms[22m[39m[35m 65 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.messaging.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 31[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/storage/persistence.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 34[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/configStore.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 36[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAmiConfBridge.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 32[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAgentState.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 24[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.persistence.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 31[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/callStore.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 35[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/adapters/twilio.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 20[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/formatters.test.ts [2m([22m[2m74 tests[22m[2m)[22m[32m 27[2mms[22m[39m[35m 62 MB heap used[39m
[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mComposable Creation[2m > [22m[2mshould create composable with default options
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mComposable Creation[2m > [22m[2mshould expose all state refs
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mComposable Creation[2m > [22m[2mshould expose all methods
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mComposable Creation[2m > [22m[2mshould expose service instance
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mComposable Creation[2m > [22m[2mshould expose isOnCallbackPage computed
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mCustom Options[2m > [22m[2mshould respect autoInitialize option
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mCustom Options[2m > [22m[2mshould respect autoHandleCallback option
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

[90mstderr[2m | tests/unit/composables/useOAuth2.test.ts[2m > [22m[2museOAuth2[2m > [22m[2mCustom Options[2m > [22m[2mshould respect custom callbackPath
[22m[39m[Vue warn]: onMounted is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.

 [32mâœ“[39m tests/unit/composables/useOAuth2.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 27[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/errorContext.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 29[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/validators.test.ts [2m([22m[2m58 tests[22m[2m)[22m[32m 25[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useSettingsPersistence.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 11[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/transcription/pii-redactor.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 18[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/errorHelpers.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 25[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useCallCenterProvider.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.download.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 18[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/AnalyticsPlugin.lifecycle.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 25[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/useAgentMetrics.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 39[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/adapters/SipJsAdapter.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 21[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.media.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 16[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/index.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 11[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/index.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 75 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/formatters.sipUri.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 55 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/call-center/adapters/asterisk.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 35[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/SipClient.conference.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 18[2mms[22m[39m[35m 62 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/providerSelector.types.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 13[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/transcription/keyword-detector.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 25[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/transcription/provider-registry.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 30[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/abortController.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 25[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/mainExports.provider.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 30[2mms[22m[39m[35m 73 MB heap used[39m
 [32mâœ“[39m tests/unit/transcription/transcript-exporter.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 27[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/credentialStorage.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/configs/46elks.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/configs/voipms.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 16[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/providerRegistry.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 36[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/adapters/types.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 29[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/configs/telnyx.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 13[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/ami-helpers.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 13[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/adapters/index.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 19[2mms[22m[39m[35m 54 MB heap used[39m
 [32mâœ“[39m tests/unit/utils/env.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 7[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/configs/own-pbx.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 12[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/configs/index.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 21[2mms[22m[39m[35m 54 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.concurrency.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 13[2mms[22m[39m[35m 57 MB heap used[39m
 [32mâœ“[39m tests/unit/stores/index.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 10[2mms[22m[39m[35m 61 MB heap used[39m
 [32mâœ“[39m tests/unit/composables/index.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 11[2mms[22m[39m[35m 63 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/AnalyticsPlugin.security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 12[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/RecordingPlugin.lifecycle.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 17[2mms[22m[39m[35m 60 MB heap used[39m
 [32mâœ“[39m tests/unit/adapters/index.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/plugins/index.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m[35m 65 MB heap used[39m
 [32mâœ“[39m tests/unit/providers/call-center/types.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 14[2mms[22m[39m[35m 58 MB heap used[39m
 [32mâœ“[39m tests/unit/storage/index.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m[35m 59 MB heap used[39m
 [32mâœ“[39m tests/unit/configuration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m[35m 59 MB heap used[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/unit/SipClient.e2e-mode.test.ts[2m > [22mSipClient - E2E Test Mode[2m > [22mE2E Mode Detection[2m > [22mshould use normal mode when E2E globals not present
[41m[1m FAIL [22m[49m tests/unit/SipClient.e2e-mode.test.ts[2m > [22mSipClient - E2E Test Mode[2m > [22mE2E Mode Detection[2m > [22mshould use normal mode when E2E globals not present
[41m[1m FAIL [22m[49m tests/unit/SipClient.e2e-mode.test.ts[2m > [22mSipClient - E2E Test Mode[2m > [22mE2E Mode Detection[2m > [22mshould use normal mode when E2E globals not present
[31m[1mError[22m: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m tests/unit/SipClient.e2e-mode.test.ts:[2m79:5[22m[39m
    [90m 77| [39m    })
    [90m 78| [39m
    [90m 79| [39m    it('should use normal mode when E2E globals not present', async ()â€¦
    [90m   | [39m    [31m^[39m
    [90m 80| [39m      // Configure mock to simulate successful connection when start()â€¦
    [90m 81| [39m      [34msetupAutoConnect[39m()

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m175 passed[39m[22m[90m (176)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m5716 passed[39m[22m[90m (5717)[39m
[2m   Start at [22m 19:39:00
[2m   Duration [22m 99.96s[2m (transform 8.71s, setup 34.95s, collect 13.43s, tests 65.90s, environment 140.82s, prepare 2.51s)[22m

â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
